/**
 * JavaScript naming conventions conversion
 * (c) 2020-2021 Rodziu <mateusz.rohde@gmail.com>
 * License: MIT
 */
const TYPE_NUMBER = 1, TYPE_LOWERCASE = 2, TYPE_UPPERCASE = 3, TYPE_SPECIAL = 4;
const conventions = {
    camelCase: {
        from(input) {
            return {
                parsedInput: input,
                regex: /[A-Z]/g
            };
        },
        to(letter) {
            return letter.toUpperCase();
        }
    },
    pascalCase: {
        from(input) {
            const parsedInput = input[0].toLowerCase() + input.substring(1);
            return {
                parsedInput,
                regex: /[A-Z]/g
            };
        },
        to(letter) {
            return letter.toUpperCase();
        },
        postProcess(result) {
            return result[0].toUpperCase() + result.substring(1);
        }
    },
    snakeCase: {
        from(input) {
            return {
                parsedInput: input,
                regex: /_[a-z]/g
            };
        },
        to(letter) {
            return `_${letter.toLowerCase()}`;
        }
    },
    kebabCase: {
        from(input) {
            return {
                parsedInput: input,
                regex: /-[a-z]/g
            };
        },
        to(letter) {
            return `-${letter.toLowerCase()}`;
        }
    }
};
export const NamingConventions = {
    camelCase: 'camelCase',
    pascalCase: 'pascalCase',
    snakeCase: 'snakeCase',
    kebabCase: 'kebabCase',
    convert(input) {
        return {
            /**
             * Prepare provided input to be converted from given convention
             */
            from(convention) {
                const { parsedInput, regex } = _getConvention(convention).from(input);
                return {
                    to(targetConvention) {
                        return _replace(parsedInput, regex, targetConvention);
                    }
                };
            },
            /**
             * Parse provided input and convert it to desired convention
             */
            to(targetConvention) {
                const len = input.length, parsed = [];
                let prevType = 0, stack = '';
                for (let i = 0; i < len; i++) {
                    const type = _getType(input[i]);
                    if (i > 0 && !_compareTypes(prevType, type, stack) && stack.length) {
                        parsed.push(stack);
                        stack = '';
                    }
                    if (i === 0 || type !== TYPE_SPECIAL) {
                        stack += input[i].toLowerCase();
                    }
                    prevType = type;
                }
                if (stack.length) {
                    parsed.push(stack);
                }
                return _replace(parsed.join('-'), /-[a-z]/g, targetConvention);
            }
        };
    },
    /**
     * @param {string} conventionName
     * @param {NamingConventionProcessor} processor
     */
    addConvention(conventionName, processor) {
        conventions[conventionName] = processor;
        NamingConventions[conventionName] = conventionName;
    }
};
export default NamingConventions;
function _getConvention(convention) {
    if (typeof conventions[convention] !== 'undefined') {
        return conventions[convention];
    }
    throw new Error(`Unknown naming convention '${convention}'!`);
}
function _replace(parsedInput, regex, targetConvention) {
    const result = parsedInput.replace(regex, (match) => {
        return _getConvention(targetConvention).to(match.substring(match.length - 1));
    });
    if (result.length && typeof _getConvention(targetConvention).postProcess === 'function') {
        return _getConvention(targetConvention).postProcess(result);
    }
    return result;
}
function _getType(char) {
    if (!isNaN(parseInt(char, 10))) {
        return TYPE_NUMBER;
    }
    else if (char === char.toLowerCase() && char !== char.toUpperCase()) {
        return TYPE_LOWERCASE;
    }
    else if (char === char.toUpperCase() && char !== char.toLowerCase()) {
        return TYPE_UPPERCASE;
    }
    return TYPE_SPECIAL;
}
function _compareTypes(prevType, type, stack) {
    if (type === prevType) {
        return true;
    }
    else if (type === TYPE_NUMBER) {
        return prevType !== TYPE_SPECIAL;
    }
    else if (type === TYPE_LOWERCASE && prevType === TYPE_UPPERCASE) {
        return stack.length === 1; // for camelCase
    }
    return false;
}

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9uYW1pbmctY29udmVudGlvbnMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7R0FJRztBQUNILE1BQU0sV0FBVyxHQUFHLENBQUMsRUFBRSxjQUFjLEdBQUcsQ0FBQyxFQUFFLGNBQWMsR0FBRyxDQUFDLEVBQUUsWUFBWSxHQUFHLENBQUMsQ0FBQztBQVFoRixNQUFNLFdBQVcsR0FBc0Q7SUFDbkUsU0FBUyxFQUFFO1FBQ1AsSUFBSSxDQUFDLEtBQUs7WUFDTixPQUFPO2dCQUNILFdBQVcsRUFBRSxLQUFLO2dCQUNsQixLQUFLLEVBQUUsUUFBUTthQUNsQixDQUFBO1FBRUwsQ0FBQztRQUNELEVBQUUsQ0FBQyxNQUFNO1lBQ0wsT0FBTyxNQUFNLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDaEMsQ0FBQztLQUNKO0lBQ0QsVUFBVSxFQUFFO1FBQ1IsSUFBSSxDQUFDLEtBQUs7WUFDTixNQUFNLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxFQUFFLEdBQUcsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNoRSxPQUFPO2dCQUNILFdBQVc7Z0JBQ1gsS0FBSyxFQUFFLFFBQVE7YUFDbEIsQ0FBQTtRQUVMLENBQUM7UUFDRCxFQUFFLENBQUMsTUFBTTtZQUNMLE9BQU8sTUFBTSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2hDLENBQUM7UUFDRCxXQUFXLENBQUMsTUFBTTtZQUNkLE9BQU8sTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsRUFBRSxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQsQ0FBQztLQUNKO0lBQ0QsU0FBUyxFQUFFO1FBQ1AsSUFBSSxDQUFDLEtBQUs7WUFDTixPQUFPO2dCQUNILFdBQVcsRUFBRSxLQUFLO2dCQUNsQixLQUFLLEVBQUUsU0FBUzthQUNuQixDQUFBO1FBQ0wsQ0FBQztRQUNELEVBQUUsQ0FBQyxNQUFNO1lBQ0ws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QUNmO1NBQU0sSUFBSSxJQUFJLEtBQUssV0FBVyxFQUFFO1FBQzdCLE9BQU8sUUFBUSxLQUFLLFlBQVksQ0FBQztLQUNwQztTQUFNLElBQUksSUFBSSxLQUFLLGNBQWMsSUFBSSxRQUFRLEtBQUssY0FBYyxFQUFFO1FBQy9ELE9BQU8sS0FBSyxDQUFDLE1BQU0sS0FBSyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0I7S0FDOUM7SUFDRCxPQUFPLEtBQUssQ0FBQztBQUNqQixDQUFDIiwiZmlsZSI6Im5hbWluZy1jb252ZW50aW9ucy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSmF2YVNjcmlwdCBuYW1pbmcgY29udmVudGlvbnMgY29udmVyc2lvblxuICogKGMpIDIwMjAtMjAyMSBSb2R6aXUgPG1hdGV1c3oucm9oZGVAZ21haWwuY29tPlxuICogTGljZW5zZTogTUlUXG4gKi9cbmNvbnN0IFRZUEVfTlVNQkVSID0gMSwgVFlQRV9MT1dFUkNBU0UgPSAyLCBUWVBFX1VQUEVSQ0FTRSA9IDMsIFRZUEVfU1BFQ0lBTCA9IDQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTmFtaW5nQ29udmVudGlvblByb2Nlc3NvciB7XG4gICAgZnJvbTogKGlucHV0OiBzdHJpbmcpID0+IHsgcGFyc2VkSW5wdXQ6IHN0cmluZywgcmVnZXg6IFJlZ0V4cCB9LFxuICAgIHRvOiAobGV0dGVyOiBzdHJpbmcpID0+IHN0cmluZyxcbiAgICBwb3N0UHJvY2Vzcz86IChyZXN1bHQ6IHN0cmluZykgPT4gc3RyaW5nXG59XG5cbmNvbnN0IGNvbnZlbnRpb25zOiB7W2NvbnZlbnRpb246IHN0cmluZ106IE5hbWluZ0NvbnZlbnRpb25Qcm9jZXNzb3J9ID0ge1xuICAgIGNhbWVsQ2FzZToge1xuICAgICAgICBmcm9tKGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhcnNlZElucHV0OiBpbnB1dCxcbiAgICAgICAgICAgICAgICByZWdleDogL1tBLVpdL2dcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9LFxuICAgICAgICB0byhsZXR0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBsZXR0ZXIudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcGFzY2FsQ2FzZToge1xuICAgICAgICBmcm9tKGlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRJbnB1dCA9IGlucHV0WzBdLnRvTG93ZXJDYXNlKCkgKyBpbnB1dC5zdWJzdHJpbmcoMSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhcnNlZElucHV0LFxuICAgICAgICAgICAgICAgIHJlZ2V4OiAvW0EtWl0vZ1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0sXG4gICAgICAgIHRvKGxldHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBwb3N0UHJvY2VzcyhyZXN1bHQpIHtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRbMF0udG9VcHBlckNhc2UoKSArIHJlc3VsdC5zdWJzdHJpbmcoMSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNuYWtlQ2FzZToge1xuICAgICAgICBmcm9tKGlucHV0KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBhcnNlZElucHV0OiBpbnB1dCxcbiAgICAgICAgICAgICAgICByZWdleDogL19bYS16XS9nXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRvKGxldHRlcikge1xuICAgICAgICAgICAgcmV0dXJuIGBfJHtsZXR0ZXIudG9Mb3dlckNhc2UoKX1gO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBrZWJhYkNhc2U6IHtcbiAgICAgICAgZnJvbShpbnB1dCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwYXJzZWRJbnB1dDogaW5wdXQsXG4gICAgICAgICAgICAgICAgcmVnZXg6IC8tW2Etel0vZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB0byhsZXR0ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiBgLSR7bGV0dGVyLnRvTG93ZXJDYXNlKCl9YDtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbmV4cG9ydCB0eXBlIE5hbWluZ0NvbnZlbnRpb24gPSBrZXlvZiB0eXBlb2YgY29udmVudGlvbnM7XG5cbmV4cG9ydCBjb25zdCBOYW1pbmdDb252ZW50aW9ucyA9IHtcbiAgICBjYW1lbENhc2U6ICdjYW1lbENhc2UnLFxuICAgIHBhc2NhbENhc2U6ICdwYXNjYWxDYXNlJyxcbiAgICBzbmFrZUNhc2U6ICdzbmFrZUNhc2UnLFxuICAgIGtlYmFiQ2FzZTogJ2tlYmFiQ2FzZScsXG4gICAgY29udmVydChpbnB1dDogc3RyaW5nKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFByZXBhcmUgcHJvdmlkZWQgaW5wdXQgdG8gYmUgY29udmVydGVkIGZyb20gZ2l2ZW4gY29udmVudGlvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmcm9tKGNvbnZlbnRpb246IE5hbWluZ0NvbnZlbnRpb24pOiB7IHRvOiAodGFyZ2V0Q29udmVudGlvbjogTmFtaW5nQ29udmVudGlvbikgPT4gc3RyaW5nIH0ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHtwYXJzZWRJbnB1dCwgcmVnZXh9ID0gX2dldENvbnZlbnRpb24oY29udmVudGlvbikuZnJvbShpbnB1dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdG8odGFyZ2V0Q29udmVudGlvbjogTmFtaW5nQ29udmVudGlvbik6IHN0cmluZyB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3JlcGxhY2UocGFyc2VkSW5wdXQsIHJlZ2V4LCB0YXJnZXRDb252ZW50aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIFBhcnNlIHByb3ZpZGVkIGlucHV0IGFuZCBjb252ZXJ0IGl0IHRvIGRlc2lyZWQgY29udmVudGlvblxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB0byh0YXJnZXRDb252ZW50aW9uOiBOYW1pbmdDb252ZW50aW9uKTogc3RyaW5nIHtcbiAgICAgICAgICAgICAgICBjb25zdCBsZW4gPSBpbnB1dC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlZCA9IFtdO1xuICAgICAgICAgICAgICAgIGxldCBwcmV2VHlwZSA9IDAsXG4gICAgICAgICAgICAgICAgICAgIHN0YWNrID0gJyc7XG5cbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBfZ2V0VHlwZShpbnB1dFtpXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPiAwICYmICFfY29tcGFyZVR5cGVzKHByZXZUeXBlLCB0eXBlLCBzdGFjaykgJiYgc3RhY2subGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJzZWQucHVzaChzdGFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjayA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IDAgfHwgdHlwZSAhPT0gVFlQRV9TUEVDSUFMKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFjayArPSBpbnB1dFtpXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcHJldlR5cGUgPSB0eXBlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzdGFjay5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFyc2VkLnB1c2goc3RhY2spO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBfcmVwbGFjZShwYXJzZWQuam9pbignLScpLCAvLVthLXpdL2csIHRhcmdldENvbnZlbnRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29udmVudGlvbk5hbWVcbiAgICAgKiBAcGFyYW0ge05hbWluZ0NvbnZlbnRpb25Qcm9jZXNzb3J9IHByb2Nlc3NvclxuICAgICAqL1xuICAgIGFkZENvbnZlbnRpb24oY29udmVudGlvbk5hbWU6IHN0cmluZywgcHJvY2Vzc29yOiBOYW1pbmdDb252ZW50aW9uUHJvY2Vzc29yKTogdm9pZCB7XG4gICAgICAgIGNvbnZlbnRpb25zW2NvbnZlbnRpb25OYW1lXSA9IHByb2Nlc3NvcjtcbiAgICAgICAgTmFtaW5nQ29udmVudGlvbnNbY29udmVudGlvbk5hbWVdID0gY29udmVudGlvbk5hbWU7XG4gICAgfVxufTtcblxuZXhwb3J0IGRlZmF1bHQgTmFtaW5nQ29udmVudGlvbnM7XG5cbmZ1bmN0aW9uIF9nZXRDb252ZW50aW9uKGNvbnZlbnRpb246IE5hbWluZ0NvbnZlbnRpb24pOiBOYW1pbmdDb252ZW50aW9uUHJvY2Vzc29yIHtcbiAgICBpZiAodHlwZW9mIGNvbnZlbnRpb25zW2NvbnZlbnRpb25dICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gY29udmVudGlvbnNbY29udmVudGlvbl07XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBuYW1pbmcgY29udmVudGlvbiAnJHtjb252ZW50aW9ufSchYClcbn1cblxuZnVuY3Rpb24gX3JlcGxhY2UocGFyc2VkSW5wdXQ6IHN0cmluZywgcmVnZXg6IFJlZ0V4cCwgdGFyZ2V0Q29udmVudGlvbjogTmFtaW5nQ29udmVudGlvbik6IHN0cmluZyB7XG4gICAgY29uc3QgcmVzdWx0ID0gcGFyc2VkSW5wdXQucmVwbGFjZShyZWdleCwgKG1hdGNoKSA9PiB7XG4gICAgICAgIHJldHVybiBfZ2V0Q29udmVudGlvbih0YXJnZXRDb252ZW50aW9uKS50byhtYXRjaC5zdWJzdHJpbmcobWF0Y2gubGVuZ3RoIC0gMSkpO1xuICAgIH0pO1xuICAgIGlmIChyZXN1bHQubGVuZ3RoICYmIHR5cGVvZiBfZ2V0Q29udmVudGlvbih0YXJnZXRDb252ZW50aW9uKS5wb3N0UHJvY2VzcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gX2dldENvbnZlbnRpb24odGFyZ2V0Q29udmVudGlvbikucG9zdFByb2Nlc3MocmVzdWx0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gX2dldFR5cGUoY2hhcjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoIWlzTmFOKHBhcnNlSW50KGNoYXIsIDEwKSkpIHtcbiAgICAgICAgcmV0dXJuIFRZUEVfTlVNQkVSO1xuICAgIH0gZWxzZSBpZiAoY2hhciA9PT0gY2hhci50b0xvd2VyQ2FzZSgpICYmIGNoYXIgIT09IGNoYXIudG9VcHBlckNhc2UoKSkge1xuICAgICAgICByZXR1cm4gVFlQRV9MT1dFUkNBU0U7XG4gICAgfSBlbHNlIGlmIChjaGFyID09PSBjaGFyLnRvVXBwZXJDYXNlKCkgJiYgY2hhciAhPT0gY2hhci50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgIHJldHVybiBUWVBFX1VQUEVSQ0FTRTtcbiAgICB9XG4gICAgcmV0dXJuIFRZUEVfU1BFQ0lBTDtcbn1cblxuZnVuY3Rpb24gX2NvbXBhcmVUeXBlcyhwcmV2VHlwZTogbnVtYmVyLCB0eXBlOiBudW1iZXIsIHN0YWNrOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAodHlwZSA9PT0gcHJldlR5cGUpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX05VTUJFUikge1xuICAgICAgICByZXR1cm4gcHJldlR5cGUgIT09IFRZUEVfU1BFQ0lBTDtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfTE9XRVJDQVNFICYmIHByZXZUeXBlID09PSBUWVBFX1VQUEVSQ0FTRSkge1xuICAgICAgICByZXR1cm4gc3RhY2subGVuZ3RoID09PSAxOyAvLyBmb3IgY2FtZWxDYXNlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cbiJdfQ==
